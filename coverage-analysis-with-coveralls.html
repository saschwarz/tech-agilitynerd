<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->

<head>
  <meta charset="utf-8">
  <title>tech.agilitynerd</title>
  <meta name="viewport" content="width=device-width, initial-scale=1 maximum-scale=1">
  <meta name="description" content="">
  <meta name="author" content="Steve Schwarz">    <!-- <link href="https://tech.agilitynerd.com/feeds/all-en.atom.xml" type="application/atom+xml" rel="alternate" title="tech.agilitynerd Atom Feed" /> -->
  <link href="https://feeds.feedburner.com/feeds/all-en.atom.xml" type="application/atom+xml" rel="alternate" title="tech.agilitynerd Atom Feed" />     <!-- Le styles -->
  <link href="https://tech.agilitynerd.com/theme/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <style type="text/css">
    body {
      padding-top: 60px;
      padding-bottom: 40px;
    }

    .sidebar-nav {
      padding: 9px 0;
    }

    @media (max-width: 767px) {
      .sidebar {
        margin-top: 2em;
        border-top: 1px solid #e3e3e3;
        padding-top: 1em;
      }

      .sidebar .search {
        margin-bottom: 0;
      }
    }
  </style>
  <link href="https://tech.agilitynerd.com/theme/bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet">
  <link href="https://tech.agilitynerd.com/theme/local.css" rel="stylesheet">
  <link href="https://tech.agilitynerd.com/theme/pygments.css" rel="stylesheet">
<script async defer data-website-id="cca63deb-7286-45cf-9476-1325f1e3c49d" src="https://umami.agilitynerd.com/umami.js"></script>
</head>

<body>
  <!--[if lt IE 7]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->
  <div class="navbar navbar-inverse navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container-fluid">
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
	<span class="icon-bar"></span>
	<span class="icon-bar"></span>
	<span class="icon-bar"></span>
      </a>
      <a class="brand" href="https://tech.agilitynerd.com/index.html">tech.agilitynerd</a>
      <div class="nav-collapse collapse">
	<ul class="nav">
	  <li ><a href="https://tech.agilitynerd.com/category/devops.html">devops</a></li>
	  <li ><a href="https://tech.agilitynerd.com/category/javascript.html">javascript</a></li>
	  <li ><a href="https://tech.agilitynerd.com/category/misc.html">misc</a></li>
	  <li ><a href="https://tech.agilitynerd.com/category/programming.html">programming</a></li>
	  <li ><a href="https://tech.agilitynerd.com/category/python.html">python</a></li>
	  <li class="active"><a href="https://tech.agilitynerd.com/category/webdev.html">webdev</a></li>
	</ul>
	<p class="navbar-text pull-right">
	  <a class="navbar-link" href="https://tech.agilitynerd.com/archives.html">[archives]</a>
	  <a class="navbar-link" href="https://tech.agilitynerd.com/tags.html">[tags]</a>
	</p>
      </div><!--/.nav-collapse -->
    </div>
  </div>
</div>
  <div class="container-fluid">
    <div class="row-fluid">
      <div class="span1">&nbsp;</div>
      <div class="span10">
        <div class="row-fluid">
          <div class="span9">
 <div class='article'>
  <div class="page-header"><h1>Integrated Coverage Analysis with Coveralls</h1></div>
  <div class="well small"><a class="more" href="https://tech.agilitynerd.com/coverage-analysis-with-coveralls.html">15 Dec 2013</a>
by <a class="url fn" href="https://tech.agilitynerd.com/author/steve-schwarz.html">Steve Schwarz</a> in <a href="https://tech.agilitynerd.com/category/webdev.html">webdev</a>
| <a href="https://tech.agilitynerd.com/coverage-analysis-with-coveralls.html#disqus_thread" data-disqus-identifier="coverage-analysis-with-coveralls.html">Comments</a></div>
  <div><p>When I converted <a class="reference external" href="https://github.com/saschwarz/django-periodicals">django-periodicals</a> to use <a class="reference external" href="https://tech.agilitynerd.com/cookiecutter-django-do-the-right-thing.html">cookiecutter-djangopackage</a> I was running <a class="reference external" href="https://pypi.python.org/pypi/coverage">coverage.py</a> in my <a class="reference external" href="https://travis-ci.org">Travis-CI</a> <tt class="docutils literal">.travis.yml</tt> to report the coverage results to the command line log. The coverage results were interesting but didn't really alter my development practice much.</p>
<p>Over the years I've had differing options about coverage testing/analysis. Like any programming metric you can &quot;cook the books&quot; and pump up the metric while not actually improving the quality or maintainability of the code being measured.  Minimally coverage testing can uncover unexercised corners of the code, especially error handling code. Nothing is worse than crashing an application with faulty error handling code.</p>
<p><tt class="docutils literal">coverage.py</tt> is trivial to run and it generates reports in various formats to make finding unexercised code simple. It is so easy there is no reason not to run it.</p>
<p>So my local coverage testing showed 7% of my code wasn't exercised - &quot;good enough&quot; right?</p>
<p>Then I discovered <a class="reference external" href="https://coveralls.io/">Coveralls</a>. Coveralls integrates with Travis and collects coverage data for each buid and displays it on their website. It was <a class="reference external" href="https://github.com/coagulant/coveralls-python#usage-travis-ci">trivial to setup</a>:</p>
<ul class="simple">
<li>Create a login on Coverall and enable your Travis-CI project.</li>
<li>Add <tt class="docutils literal">coveralls</tt> to the project's test <tt class="docutils literal">requirements.txt</tt>.</li>
<li>Then add <tt class="docutils literal">after_success: coveralls</tt> to <tt class="docutils literal">.travis.yml</tt>.</li>
</ul>
<p>The next time the project is tested on Travis-CI the coverage results appear on coveralls.io. You can view the untested code in each file and Coveralls will track the increase/decrease of coverage in each file each time you check-in/test.</p>
<p>They also have badges showing the percent coverage that you can embed in your reStructuredText documentation on GitHub and ReadTheDocs. And that's the insidious part of integrated open source development...</p>
<p>The <tt class="docutils literal"><span class="pre">cookiecutter-djangoproject</span></tt> produces an application GitHub page that shows the Travis-CI test status and the PyPi package version. With the addition of the Coveralls badge it can now show the coverage percentage. That turned out to be a little bit of programming peer group pressure that made 93% coverge no longer &quot;good enough&quot;!</p>
<p>So a few minutes and a few tests later I had tests that did exercise the full code base including error handling. That gave me a happy little green badge that displayed &quot;coverage 100%&quot;.</p>
<p>So not only is Coveralls fully integrated with the GitHub - CI - Open Source infrastructure, and dead simple to use, it got this developer to push into all the corners of his code before releasing. And I now have the peace of mind that Travis <em>and</em> Coveralls will be watching my back.</p>
<a class="reference external image-reference" href="http://badge.fury.io/py/django-periodicals"><img alt="badge image" src="https://badge.fury.io/py/django-periodicals.png" /></a>
<a class="reference external image-reference" href="https://travis-ci.org/saschwarz/django-periodicals"><img alt="badge image for travis" src="https://travis-ci.org/saschwarz/django-periodicals.png?branch=master" /></a>
<a class="reference external image-reference" href="https://coveralls.io/r/saschwarz/django-periodicals?branch=master"><img alt="badge image for coveralls" src="https://coveralls.io/repos/saschwarz/django-periodicals/badge.png?branch=master" /></a>
</div>
<div class="tags"><label>Tags:</label> <a href="https://tech.agilitynerd.com/tag/coverage.html">coverage</a> <a href="https://tech.agilitynerd.com/tag/webdevelopment.html">webdevelopment</a> <a href="https://tech.agilitynerd.com/tag/github.html">github</a> <a href="https://tech.agilitynerd.com/tag/django.html">django</a> <a href="https://tech.agilitynerd.com/tag/testing.html">testing</a> <a href="https://tech.agilitynerd.com/tag/travis.html">travis</a> <a href="https://tech.agilitynerd.com/tag/python.html">python</a> </div>  <div>
    <h2>Comments</h2>
    <div>
      <div id="disqus_thread"></div>
    </div>
    <script type="text/javascript">
      var disqus_shortname = 'techagilitynerd';
      var disqus_identifier = 'coverage-analysis-with-coveralls.html';
      var disqus_url = 'https://tech.agilitynerd.com/coverage-analysis-with-coveralls.html';
      (function () {
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//techagilitynerd.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    </script>
  </div>
</div>
          </div>
          <!--/span-->

          <div class="span3 sidebar">

<div id="searchbox"></div>
<div id="hits"></div>
<div id="algolia"></div>
<!-- Include AlgoliaSearch JS Client and autocomplete.js library -->
<!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.css@7.3.1/themes/reset-min.css" integrity="sha256-t2ATOGCtAIZNnzER679jwcFcKYfLlw01gli6F6oszk8=" crossorigin="anonymous"> -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.css@7.4.5/themes/satellite-min.css" integrity="sha256-TehzF/2QvNKhGQrrNpoOb2Ck4iGZ1J/DI4pkd2oUsBc=" crossorigin="anonymous">
<style>
  #searchbox {
    margin-top: 1.5em
  }

  .ais-SearchBox,
  .ais-SearchBox-input,
  .ais-SearchBox-form {
    margin-bottom: 0 !important;
    padding-bottom: 0 !important;
  }

  .ais-SearchBox-form:before {
    margin-top: -0.7rem;
    left: auto;
    right: 1rem;
  }

  #algolia {
    margin-top: 12px;
  }
</style>
<script src="https://cdn.jsdelivr.net/npm/algoliasearch@4.5.1/dist/algoliasearch-lite.umd.js" integrity="sha256-EXPXz4W6pQgfYY3yTpnDa3OH8/EPn16ciVsPQ/ypsjk=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/instantsearch.js@4.8.3/dist/instantsearch.production.min.js" integrity="sha256-LAGhRRdtVoD6RLo2qDQsU2mp+XVSciKRC8XPOBWmofM=" crossorigin="anonymous"></script>
<!-- Initialize autocomplete menu -->
<script>
  const searchClient = algoliasearch("2E3DM6BSS0", "4079d62cdb7e20149b0bb83b331959ab");
  const search = instantsearch({
    indexName: 'main',
    searchClient,
    searchFunction: function (helper) {
      var hits = document.getElementById('hits');
      if (helper.state.query === '') {
        hits.style.display = 'none';
        return;
      }
      helper.search();
      hits.style.display = 'block';
    }
  });

  search.addWidgets([
    instantsearch.widgets.searchBox({
      container: '#searchbox',
      placeholder: 'Search articles...',
      autofocus: false,
      poweredBy: true,
    }),

    instantsearch.widgets.hits({
      container: '#hits',
      templates: {
        item(hit) {
          return `
          <article>
            <div><a href="/${hit.url}"><strong>${instantsearch.highlight({ attribute: 'title', highlightedTagName: 'mark', hit })}</strong></a></div>
          </article>
        `;
        }
      }
    }),

    instantsearch.widgets.poweredBy({
      container: '#algolia',
    })

  ]);

  search.start();
</script>
 <hr>
<div class="author">
<h4>About</h4>
<div class="author-about">
  <p class="about">I'm Steve Schwarz a Chicago software developer and dog agility enthusiast.
 <a href="/pages/about.html">More about me</a></p>
</div>
</div>
<div class="well sidebar-nav">
  <ul class="nav nav-list">
    <li class="nav-header">Blogroll</li>
    <li><a href="https://agilitycoursemaster.com">agilitycoursemaster.com</a></li>
    <li><a href="https://agilitynerd.com/blog/">agilitynerd.com</a></li>
    <li><a href="https://agilitycourses.com/">agilitycourses.com</a></li>
    <li><a href="https://googility.com/">googility.com</a></li>
  </ul>
  <ul class="nav nav-list social">
    <li class="nav-header">Elsewhere</li>
    <li><a href="www.linkedin.com/in/steve-schwarz-5034893">Linked in</a></li>
    <li><a href="https://github.com/saschwarz">GitHub</a></li>
    <li><a href="https://twitter.com/steveaschwarz">Twitter</a></li>
  </ul>
</div><!--/.well -->
          </div>
          <!--/span-->

        </div>
      </div>
    </div>
    <!--/row-->

    <hr>

    <footer>
      <span>Powered by <a href="http://blog.getpelican.com/">Pelican</a></span>
      <span class="pull-right">&copy; Steve Schwarz 2021</span>
    </footer>

  </div>
  <!--/.fluid-container-->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <script>
    window.jQuery || document.write('<script src="https://tech.agilitynerd.com/theme/js/jquery-1.7.2.min.js"><\/script>')
  </script>
  <script src="https://tech.agilitynerd.com/theme/bootstrap/js/bootstrap.min.js"></script>
  <!-- <script src="https://tech.agilitynerd.com/theme/js/modernizr-2.5.3-respond-1.1.0.min.js"></script> -->
<script type="text/javascript">
    var disqus_shortname = 'techagilitynerd';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'https://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>

</html>