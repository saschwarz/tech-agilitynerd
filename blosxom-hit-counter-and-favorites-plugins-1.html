<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->

<head>
  <meta charset="utf-8">
  <title>tech.agilitynerd</title>
  <meta name="viewport" content="width=device-width, initial-scale=1 maximum-scale=1">
  <meta name="description" content="">
  <meta name="author" content="Steve Schwarz">    <!-- <link href="https://tech.agilitynerd.com/feeds/all-en.atom.xml" type="application/atom+xml" rel="alternate" title="tech.agilitynerd Atom Feed" /> -->
  <link href="https://feeds.feedburner.com/feeds/all-en.atom.xml" type="application/atom+xml" rel="alternate" title="tech.agilitynerd Atom Feed" />     <!-- Le styles -->
  <link href="https://tech.agilitynerd.com/theme/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <style type="text/css">
    body {
      padding-top: 60px;
      padding-bottom: 40px;
    }

    .sidebar-nav {
      padding: 9px 0;
    }

    @media (max-width: 767px) {
      .sidebar {
        margin-top: 2em;
        border-top: 1px solid #e3e3e3;
        padding-top: 1em;
      }

      .sidebar .search {
        margin-bottom: 0;
      }
    }
  </style>
  <link href="https://tech.agilitynerd.com/theme/bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet">
  <link href="https://tech.agilitynerd.com/theme/local.css" rel="stylesheet">
  <link href="https://tech.agilitynerd.com/theme/pygments.css" rel="stylesheet">
<script async defer data-website-id="cca63deb-7286-45cf-9476-1325f1e3c49d" src="https://umami.agilitynerd.com/umami.js"></script>
</head>

<body>
  <!--[if lt IE 7]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->
  <div class="navbar navbar-inverse navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container-fluid">
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
	<span class="icon-bar"></span>
	<span class="icon-bar"></span>
	<span class="icon-bar"></span>
      </a>
      <a class="brand" href="https://tech.agilitynerd.com/index.html">tech.agilitynerd</a>
      <div class="nav-collapse collapse">
	<ul class="nav">
	  <li ><a href="https://tech.agilitynerd.com/category/devops.html">devops</a></li>
	  <li ><a href="https://tech.agilitynerd.com/category/javascript.html">javascript</a></li>
	  <li ><a href="https://tech.agilitynerd.com/category/misc.html">misc</a></li>
	  <li ><a href="https://tech.agilitynerd.com/category/programming.html">programming</a></li>
	  <li ><a href="https://tech.agilitynerd.com/category/python.html">python</a></li>
	  <li class="active"><a href="https://tech.agilitynerd.com/category/webdev.html">webdev</a></li>
	</ul>
	<p class="navbar-text pull-right">
	  <a class="navbar-link" href="https://tech.agilitynerd.com/archives.html">[archives]</a>
	  <a class="navbar-link" href="https://tech.agilitynerd.com/tags.html">[tags]</a>
	</p>
      </div><!--/.nav-collapse -->
    </div>
  </div>
</div>
  <div class="container-fluid">
    <div class="row-fluid">
      <div class="span1">&nbsp;</div>
      <div class="span10">
        <div class="row-fluid">
          <div class="span9">
 <div class='article'>
  <div class="page-header"><h1>Blosxom - Hit Counter and Favorites Plugins</h1></div>
  <div class="well small"><a class="more" href="https://tech.agilitynerd.com/blosxom-hit-counter-and-favorites-plugins-1.html">29 Dec 2007</a>
by <a class="url fn" href="https://tech.agilitynerd.com/author/steve-schwarz.html">Steve Schwarz</a> in <a href="https://tech.agilitynerd.com/category/webdev.html">webdev</a>
| <a href="https://tech.agilitynerd.com/blosxom-hit-counter-and-favorites-plugins-1.html#disqus_thread" data-disqus-identifier="blosxom-hit-counter-and-favorites-plugins-1.html">Comments</a></div>
  <div><p>I added a <a class="reference external" href="http://agilitynerd.com/static/Favorites.html">Favorites page</a> to the side menu of my AgilityNerd site.
Since then I've been updating it manually about once a month based on
the AWStats reports from my web hosting provider (HostMagix). This task
is unnecessarily complicated because AWStats keeps page counts
independently for each URL, which includes the <a class="reference external" href="http://blosxom.sourceforge.net/">Blosxom</a> flavour
(filename extension). For my purposes I don't want to distinguish
between say HitCounterFavorites.html and HitCounterFavorites.htm</p>
<p>So I decided to write a plugin to track the hits per page and &quot;lump&quot;
together counts independently from the file extension. This plugin
allows me to display the hit count of visitors for each page on each
page. I wrote a second plugin to use the hit count data to automatically
generate my Favorites page.</p>
<div class="section" id="hitcounter-plugin">
<h2>Hitcounter Plugin</h2>
<p>I based the hitcounter plugin on the categories plugin written by <a class="reference external" href="http://molelog.molehill.org/">Todd
Larason</a>. The plugin has a couple features of interest:</p>
<ul class="simple">
<li>The <tt class="docutils literal">$reset_count</tt> flag within the plugin lets you provide a starting
count value for any page. For example to set a page's count to 10
append &quot;?count=10&quot; to the page's URL. Disable this flag once you've
set your counts to avoid mischevious count setting by outsiders.</li>
<li>The <tt class="docutils literal">$retrieve_only_flavour flag</tt> within the plugin can be set to a
flavour you want to use for retrieving counts without incrementing
the count. Use this flavour to view the counts for URLs of interest.</li>
<li>You can add filters to the <cite>start()</cite> subroutine to exclude certain
requests from updating your counters. I exclude RSS and Atom feed
requests from my counts.</li>
<li>As of version 0.5 you can filter out loading and incrementing page
counts for specific user agents via the <tt class="docutils literal">ignore_agents array</tt>.</li>
</ul>
<p>The hitcounter plugin stores the <tt class="docutils literal"><span class="pre">$blosxom::path</span></tt> as the key in a hash
whose value is the count of hits. The hash is stored in a file in the
data directory. The same hash is used for the entire site. As each page
is &quot;hit&quot; the value is incremented and stored in the <tt class="docutils literal"><span class="pre">$hitcounter::count</span></tt>
variable. I put this variable in the footer of my pages.</p>
</div>
<div class="section" id="favorites-plugin">
<h2>Favorites Plugin</h2>
<p>My favorites plugin uses the data file containing the hash of paths and
counts as its input. This plugin generates an HTML unordered list of the
most visited URLs with the following configuration options:</p>
<ul class="simple">
<li>The <tt class="docutils literal">$num_entries</tt> variable controls how many URLs are listed.</li>
<li>The <tt class="docutils literal">$include_counts</tt> variable controls if directories will be
included in the list of entries.</li>
<li>The <tt class="docutils literal">$include_counts</tt> variable controls whether or not the number of
counts is appended to each list entry.</li>
<li>The <tt class="docutils literal">$anchor_format variable</tt> controls if the full path or only the
filename is displayed in the list entry.</li>
<li>The <tt class="docutils literal">$anchor_link</tt> variable controls whether or not the entry is
wrapped in an anchor &lt;a&gt;.</li>
<li>The <tt class="docutils literal">$excludes</tt> variable controls which pages are excluded from
consideration. I exclude the main URL for my site from showing up in
the list.</li>
<li>The <tt class="docutils literal">$groups</tt> array holds regexps that will generate separate unordered
lists grouping together pages matching each regexp of <tt class="docutils literal">$num_entries</tt>
list elements. See the configuration section for an example. I use
this feature for my Favorites page to group pages for agility and
tech categories into separate lists.</li>
<li>The <tt class="docutils literal">$url_flavour</tt> variable lets you specify the flavour to use for
anchors to non-category URLs. It defaults to to
<tt class="docutils literal"><span class="pre">$$blosxom::default_flavour</span></tt>.</li>
<li>You can add filters to the <tt class="docutils literal">start()</tt> subroutine to exclude certain
requests from doing the work to generate the HTML. For example, I
only run this plugin for my Favorites page.</li>
</ul>
<p>When this plugin runs the <tt class="docutils literal"><span class="pre">$favorites::count</span></tt> variable is populated with
the HTML. I then put this variable in my Favorites.txt page.</p>
<p>Download version 0.5 of the hitcounter plugin <a class="reference external" href="http://data.agilitynerd.com/downloads/hitcounter">here</a>.</p>
<p>Download version 0.1 of the favorites plugin
<a class="reference external" href="http://data.agilitynerd.com/downloads/favorites">here</a>.</p>
<p>Comments/bug reports are welcome.</p>
</div>
</div>
<div class="tags"><label>Tags:</label> <a href="https://tech.agilitynerd.com/tag/blosxom.html">blosxom</a> <a href="https://tech.agilitynerd.com/tag/plugin.html">plugin</a> </div>  <div>
    <h2>Comments</h2>
    <div>
      <div id="disqus_thread"></div>
    </div>
    <script type="text/javascript">
      var disqus_shortname = 'techagilitynerd';
      var disqus_identifier = 'blosxom-hit-counter-and-favorites-plugins-1.html';
      var disqus_url = 'https://tech.agilitynerd.com/blosxom-hit-counter-and-favorites-plugins-1.html';
      (function () {
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//techagilitynerd.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    </script>
  </div>
</div>
          </div>
          <!--/span-->

          <div class="span3 sidebar">

<div id="searchbox"></div>
<div id="hits"></div>
<div id="algolia"></div>
<!-- Include AlgoliaSearch JS Client and autocomplete.js library -->
<!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.css@7.3.1/themes/reset-min.css" integrity="sha256-t2ATOGCtAIZNnzER679jwcFcKYfLlw01gli6F6oszk8=" crossorigin="anonymous"> -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.css@7.4.5/themes/satellite-min.css" integrity="sha256-TehzF/2QvNKhGQrrNpoOb2Ck4iGZ1J/DI4pkd2oUsBc=" crossorigin="anonymous">
<style>
  #searchbox {
    margin-top: 1.5em
  }

  .ais-SearchBox,
  .ais-SearchBox-input,
  .ais-SearchBox-form {
    margin-bottom: 0 !important;
    padding-bottom: 0 !important;
  }

  .ais-SearchBox-form:before {
    margin-top: -0.7rem;
    left: auto;
    right: 1rem;
  }

  #algolia {
    margin-top: 12px;
  }
</style>
<script src="https://cdn.jsdelivr.net/npm/algoliasearch@4.5.1/dist/algoliasearch-lite.umd.js" integrity="sha256-EXPXz4W6pQgfYY3yTpnDa3OH8/EPn16ciVsPQ/ypsjk=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/instantsearch.js@4.8.3/dist/instantsearch.production.min.js" integrity="sha256-LAGhRRdtVoD6RLo2qDQsU2mp+XVSciKRC8XPOBWmofM=" crossorigin="anonymous"></script>
<!-- Initialize autocomplete menu -->
<script>
  const searchClient = algoliasearch("2E3DM6BSS0", "4079d62cdb7e20149b0bb83b331959ab");
  const search = instantsearch({
    indexName: 'main',
    searchClient,
    searchFunction: function (helper) {
      var hits = document.getElementById('hits');
      if (helper.state.query === '') {
        hits.style.display = 'none';
        return;
      }
      helper.search();
      hits.style.display = 'block';
    }
  });

  search.addWidgets([
    instantsearch.widgets.searchBox({
      container: '#searchbox',
      placeholder: 'Search articles...',
      autofocus: false,
      poweredBy: true,
    }),

    instantsearch.widgets.hits({
      container: '#hits',
      templates: {
        item(hit) {
          return `
          <article>
            <div><a href="/${hit.url}"><strong>${instantsearch.highlight({ attribute: 'title', highlightedTagName: 'mark', hit })}</strong></a></div>
          </article>
        `;
        }
      }
    }),

    instantsearch.widgets.poweredBy({
      container: '#algolia',
    })

  ]);

  search.start();
</script>
 <hr>
<div class="author">
<h4>About</h4>
<div class="author-about">
  <p class="about">I'm Steve Schwarz a Chicago software developer and dog agility enthusiast.
 <a href="/pages/about.html">More about me</a></p>
</div>
</div>
<div class="well sidebar-nav">
  <ul class="nav nav-list">
    <li class="nav-header">Blogroll</li>
    <li><a href="https://agilitycoursemaster.com">agilitycoursemaster.com</a></li>
    <li><a href="https://agilitynerd.com/blog/">agilitynerd.com</a></li>
    <li><a href="https://agilitycourses.com/">agilitycourses.com</a></li>
    <li><a href="https://googility.com/">googility.com</a></li>
  </ul>
  <ul class="nav nav-list social">
    <li class="nav-header">Elsewhere</li>
    <li><a href="www.linkedin.com/in/steve-schwarz-5034893">Linked in</a></li>
    <li><a href="https://github.com/saschwarz">GitHub</a></li>
    <li><a href="https://twitter.com/steveaschwarz">Twitter</a></li>
  </ul>
</div><!--/.well -->
          </div>
          <!--/span-->

        </div>
      </div>
    </div>
    <!--/row-->

    <hr>

    <footer>
      <span>Powered by <a href="http://blog.getpelican.com/">Pelican</a></span>
      <span class="pull-right">&copy; Steve Schwarz 2021</span>
    </footer>

  </div>
  <!--/.fluid-container-->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <script>
    window.jQuery || document.write('<script src="https://tech.agilitynerd.com/theme/js/jquery-1.7.2.min.js"><\/script>')
  </script>
  <script src="https://tech.agilitynerd.com/theme/bootstrap/js/bootstrap.min.js"></script>
  <!-- <script src="https://tech.agilitynerd.com/theme/js/modernizr-2.5.3-respond-1.1.0.min.js"></script> -->
<script type="text/javascript">
    var disqus_shortname = 'techagilitynerd';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'https://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>

</html>