<!DOCTYPE html>
<html lang="en">
<head>
        <title>tech.agilitynerd.com - javascript</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="../theme/css/main.css" type="text/css" />
                <link href="http://tech.agilitynerd.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="tech.agilitynerd.com Atom Feed" />
                
        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="../css/ie.css"/>
                <script src="../js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="../css/ie6.css"/><![endif]-->

</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="../">tech.agilitynerd.com </a></h1>
                <nav><ul>
                                                                                                    <li ><a href="../category/about.html">about</a></li>
                                    <li ><a href="../category/devops.html">devops</a></li>
                                    <li ><a href="../category/misc.html">misc</a></li>
                                    <li ><a href="../category/programming.html">programming</a></li>
                                    <li ><a href="../category/python.html">python</a></li>
                                    <li ><a href="../category/webdev.html">webdev</a></li>
                                </ul></nav>
        </header><!-- /#banner -->
                
            

                            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="../reducing-the-impact-of-client-side-analytics.html">Reducing the Cost of Client Side Analytics</a></h1> 
                    <footer class="post-info">
        <abbr class="published" title="2012-01-12T22:10:00">
                Thu 12 January 2012
        </abbr>

                <address class="vcard author">
                By <a class="url fn" href="../author/steve-schwarz.html">Steve Schwarz</a>
        </address>
        <p>In <a href="../category/webdev.html">webdev</a>. </p>
<p>tags: <a href="../tag/analytics.html">analytics</a><a href="../tag/boomerang.html">boomerang</a><a href="../tag/javascript.html">javascript</a><a href="../tag/sessionstorage.html">sessionstorage</a><a href="../tag/webdevelopment.html">webdevelopment</a></p>
</footer><!-- /.post-info --><p>I read&nbsp;<a class="reference external" href="http://blog.mozilla.com/webdev/2012/01/06/timing-amo-user-experience/">Andy McKay's blog post on timing user experience</a>&nbsp;on the
<a class="reference external" href="http://blog.mozilla.com/webdev">Mozilla Webdev blog</a>&nbsp;the other day and it reminded me of an idea I was
thinking about for measuring client side timings at work. I had been
toying with the idea of rolling our own library to capture JavaScript
rendering time for our JS heavy pages (grids of hundreds of lines of
data).</p>
<p>Andy's post mentions the <a class="reference external" href="http://yahoo.github.com/boomerang/doc/">boomerang JavaScript library</a>&nbsp;and when I was
reading it's docs they pointed out potential for abuse/load on the URL
used to report the timings. For each instrumented page boomerang can hit
the &quot;beacon&quot; URL to report the statistics it collects. So in the worst
case you could double your page hits - although for specific
pages/samples recording a few statistics shouldn't be too costly for low
volume sites.</p>
<p>One solution is to only sample the pages/users of interest; selecting
the sample could occur on the server and/or client. But another solution
would be to collect statistics across multiple pages and periodically
send batches of analytics to the beacon URL.</p>
<p>I've been playing with mobile web development for
<a class="reference external" href="http://m.agilitycourses.com/">agilitycourses.com</a>&nbsp;lately and will soon let users store the courses
they create in localStorage on their browser. That got me thinking that
<a class="reference external" href="http://en.wikipedia.org/wiki/Web_Storage#Local_and_session_storage">sessionStorage</a> could be used to store analytics across pages and then
periodically send the stats to the server. This would reduce the number
of hits on the beacon, allowing deployment to a larger sample of
clients. It also gets flushed once the session is closed and (if kept
small) doesn't prompt the user to approve storing the data.</p>
<p>A lot of modern <a class="reference external" href="http://www.delicious.com/redirect?url=http%3A//dev-test.nemikor.com/web-storage/support-test/">browsers support session storage</a>&nbsp;and for my purposes
only ones with support would be relevant - due to our browser support
policy at work.</p>
<p>The other problem the boomerang docs discuss is<a class="reference external" href="http://yahoo.github.com/boomerang/doc/howtos/howto-7.html">abuse of the beacon</a>
(accidental or malicious). A solution would be to piggyback reporting of
analytics into application form post payloads. This is trickier to
implement and it suffers from coupling analytic reporting into the
application itself.</p>
<p>To try to solve it some what generally... The client side JS library
could add a hidden field to any/some/specific forms into which it writes
the analytics data collected thus far. If it hooked the form submit
callback it could know if the form was successfully submitted and clear
the session storage.</p>
<p>Server side middleware could detect the hidden analytics field in the
form and extract/store the data. It could also remove the field before
passing the request data along to the app server.</p>
<p>All in all a fair amount of twiddling to keep from exposing a recording
URL to the outside world.</p>
<p>Of course if an authenticated session was being used then abusers would
have to have a valid session to post to the beacon URL.</p>
<p>I don't know if I will have time to play with the sessionStorage idea
but I think it might be a worthwhile extension to boomerang or other
client side analytics capture libraries.</p>
                </article>
                            </aside><!-- /#featured -->
                            <section id="content" class="body">
                    <h1>Other articles</h1>
                    <hr />
                    <ol id="posts-list" class="hfeed">
                                                

                 
                        <li><article class="hentry">    
                <header>
                    <h1><a href="../embedding-json-within-generated-html.html" rel="bookmark"
                           title="Permalink to Embedding JSON Within Generated HTML">Embedding JSON Within Generated HTML</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
        <abbr class="published" title="2010-07-08T21:03:00">
                Thu 08 July 2010
        </abbr>

                <address class="vcard author">
                By <a class="url fn" href="../author/steve-schwarz.html">Steve Schwarz</a>
        </address>
        <p>In <a href="../category/webdev.html">webdev</a>. </p>
<p>tags: <a href="../tag/html.html">html</a><a href="../tag/javascript.html">javascript</a><a href="../tag/json.html">json</a><a href="../tag/python.html">python</a><a href="../tag/webdevelopment.html">webdevelopment</a></p>
</footer><!-- /.post-info -->                <p>Ran into an interesting problem at work this past week that had a simple
and pleasing resolution. We have an in house developed JavaScript grid
on some of our pages and when users entered some text strings we'd
generate invalid <a class="reference external" href="http://www.json.org/js.html">JSON</a> payloads that would give the user an error ...</p>
                <a class="readmore" href="../embedding-json-within-generated-html.html">read more</a>
                                </div><!-- /.entry-content -->
            </article></li>
                            

                 
                        <li><article class="hentry">    
                <header>
                    <h1><a href="../multiple-youtube-videos-per-page-using-videol.html" rel="bookmark"
                           title="Permalink to Multiple YouTube Videos per page using VideoLightBox">Multiple YouTube Videos per page using VideoLightBox</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
        <abbr class="published" title="2010-06-04T22:58:00">
                Fri 04 June 2010
        </abbr>

                <address class="vcard author">
                By <a class="url fn" href="../author/steve-schwarz.html">Steve Schwarz</a>
        </address>
        <p>In <a href="../category/webdev.html">webdev</a>. </p>
<p>tags: <a href="../tag/css.html">css</a><a href="../tag/html.html">html</a><a href="../tag/javascript.html">javascript</a><a href="../tag/jquery.html">jquery</a><a href="../tag/video.html">video</a><a href="../tag/visuallightbox.html">visuallightbox</a><a href="../tag/webdevelopment.html">webdevelopment</a><a href="../tag/youtube.html">youtube</a></p>
</footer><!-- /.post-info -->                <p>I decided to stop displaying the default <a class="reference external" href="http://youtube.com">YouTube</a> video players within
posts on my <a class="reference external" href="http://agilitynerd.com/">AgilityNerd blog</a> and I started looking for a light boxed
player. Their were two main reasons. The smallest video playback window
provided by YouTube for HD videos is too wide for my two column layout
and ...</p>
                <a class="readmore" href="../multiple-youtube-videos-per-page-using-videol.html">read more</a>
                                </div><!-- /.entry-content -->
            </article></li>
                            </ol><!-- /#posts-list -->
                            <p class="paginator">
        Page 1 / 1
    </p>
                        </section><!-- /#content -->
                    <section id="extras" class="body">
                                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="http://tech.agilitynerd.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>
                            
                                                </ul>
                </div><!-- /.social -->
                </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>